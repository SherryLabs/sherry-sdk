---
sidebar_label: 'Frontend UI Kit'
title: TriggerKit - UI Integration Guide
description: Complete guide for integrating TriggerKit into React and Next.js applications
sidebar_position: 1
---

# TriggerKit Frontend Integration Guide

Transform your React and Next.js applications with interactive blockchain-based MiniApps using TriggerKit.

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::caution Beta Notice
TriggerKit is currently in active development. Some properties and APIs may change in future releases.
:::

## Quick Start

<Tabs>
<TabItem value="npm" label="üì¶ npm">

```bash
npm install @sherrylabs/trigger-kit @sherrylabs/trigger-nucleo
```

</TabItem>
<TabItem value="yarn" label="üß∂ Yarn">

```bash
yarn add @sherrylabs/trigger-kit @sherrylabs/trigger-nucleo
```

</TabItem>
<TabItem value="pnpm" label="üèÉ pnpm">

```bash
pnpm add @sherrylabs/trigger-kit @sherrylabs/trigger-nucleo
```

</TabItem>
</Tabs>

---

## Prerequisites

Ensure these peer dependencies are installed in your project:

```json title="Required Peer Dependencies"
{
  "@sherrylabs/slinks-core": "^1.0.0",
  "@tanstack/react-query": "^4.0.0",
  "wagmi": "^2.0.0",
  "viem": "^2.0.0",
  "react": "^18.0.0",
  "react-dom": "^18.0.0",
  "framer-motion": "^10.0.0"
}
```

---

## Setup Guide

### Step 1: Import Styles

Import the required CSS styles in your application entry point:

<Tabs>
<TabItem value="react" label="‚öõÔ∏è React (main.tsx)">

```tsx title="src/main.tsx"
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import '@sherrylabs/slinks/index.css';

ReactDOM.createRoot(document.getElementById('root')!).render(<App />);
```

</TabItem>
<TabItem value="nextjs" label="‚ñ≤ Next.js (_app.tsx)">

```tsx title="pages/_app.tsx"
import type { AppProps } from 'next/app';
import '@sherrylabs/slinks/index.css';

export default function App({ Component, pageProps }: AppProps) {
  return <Component {...pageProps} />;
}
```

</TabItem>
</Tabs>

### Step 2: Configure Providers

Set up Wagmi and React Query providers:

```tsx title="src/providers/Web3Provider.tsx"
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { WagmiProvider, createConfig, http } from 'wagmi';
import { avalanche, avalancheFuji, celo, celoAlfajores } from 'wagmi/chains';
import { injected, metaMask, coinbaseWallet } from 'wagmi/connectors';

const config = createConfig({
  chains: [avalanche, avalancheFuji, celo, celoAlfajores],
  connectors: [injected(), metaMask(), coinbaseWallet({ appName: 'My dApp' })],
  transports: {
    [avalanche.id]: http(),
    [avalancheFuji.id]: http(),
    [celo.id]: http(),
    [celoAlfajores.id]: http(),
  },
});

const queryClient = new QueryClient();

function App() {
  return (
    <WagmiProvider config={config}>
      <QueryClientProvider client={queryClient}>{/* Your app here */}</QueryClientProvider>
    </WagmiProvider>
  );
}
```

### Step 3: Initialize MiniApp Directory

```tsx title="src/lib/sherry-init.ts"
import { MiniAppDirectory, setClientKey } from '@sherrylabs/slinks-core';

export async function initializeSherrySDK() {
  const websiteClientKey = process.env.REACT_APP_SHERRY_CLIENT_KEY;
  if (websiteClientKey) {
    setClientKey(websiteClientKey);
  }

  const directory = MiniAppDirectory.getInstance();
  try {
    await directory.init({
      refreshInterval: 60 * 60 * 1000,
    });
    console.log('‚úÖ MiniApp Directory initialized');
    return true;
  } catch (error) {
    console.error('‚ùå Failed to initialize MiniApp Directory:', error);
    return false;
  }
}
```

---

## Usage Examples

### Basic MiniApp with URL

```tsx title="src/components/BasicMiniApp.tsx"
import React from 'react';
import { MiniAppComponent, useWagmiAdapter } from '@sherrylabs/slinks/next';

export function BasicMiniApp() {
  const adapter = useWagmiAdapter();

  return (
    <div className="max-w-md mx-auto p-4">
      <h2 className="text-xl font-bold mb-4">üîÑ Token Swap</h2>

      <MiniAppComponent
        url="https://app.sherry.social/action/swap"
        adapter={adapter}
        bypassProxy={true}
        stylePreset="default"
      />
    </div>
  );
}
```

### Advanced MiniApp with Custom Metadata

```tsx title="src/components/AdvancedMiniApp.tsx"
import React, { useState, useEffect } from 'react';
import { MiniAppComponent, useWagmiAdapter } from '@sherrylabs/slinks/next';
import { createMetadata, type ValidatedMetadata } from '@sherrylabs/sdk';

const swapMetadata = {
  url: 'https://swap.sherry.social',
  icon: 'https://example.com/icon.png',
  title: 'AVAX to USDT Swap',
  description: 'Swap AVAX for USDT on Trader Joe V2.2',
  baseUrl: 'https://api.sherry.social',
  actions: [
    {
      label: 'Dynamic SWAP',
      type: 'dynamic',
      description: 'Dynamic Swap',
      path: '/v1/gtm/swap',
      chains: {
        source: 'fuji',
      },
      params: [
        {
          type: 'address',
          name: 'fromToken',
          label: 'From Token',
          description: 'Token to send',
          required: true,
        },
        {
          type: 'address',
          name: 'toToken',
          label: 'To Token',
          description: 'Token to receive',
          required: true,
        },
      ],
    },
  ],
};

export function AdvancedMiniApp() {
  const adapter = useWagmiAdapter();
  const [metadata, setMetadata] = useState<ValidatedMetadata | null>(null);
  const [error, setError] = useState<string | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    try {
      const validated = createMetadata(swapMetadata);
      setMetadata(validated);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Error validating metadata');
      console.error('Error validating metadata:', err);
    } finally {
      setLoading(false);
    }
  }, []);

  if (loading) {
    return (
      <div className="max-w-md mx-auto p-4">
        <div>Loading MiniApp...</div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="max-w-md mx-auto p-4">
        <div role="alert" style={{ padding: '1em', border: '1px solid red', color: 'red' }}>
          <h3>Error</h3>
          <p>{error}</p>
        </div>
      </div>
    );
  }

  return (
    <div className="max-w-md mx-auto p-4">
      <div className="mb-4">
        <h2 className="text-xl font-bold">‚ö° Advanced Token Swap</h2>
        <p className="text-gray-600 text-sm">With pre-validated metadata</p>
      </div>

      <MiniAppComponent
        metadata={metadata!}
        adapter={adapter}
        securityState="trusted"
        stylePreset="default"
      />
    </div>
  );
}
```

---

## Component Props Reference

### MiniAppComponent

| Prop            | Type                                             | Required | Description                                       |
| --------------- | ------------------------------------------------ | :------: | ------------------------------------------------- |
| `adapter`       | `SherryAdapter`                                  |    ‚úÖ    | Wallet adapter instance                           |
| `url`           | `string`                                         |    ‚ö†Ô∏è    | URL to fetch metadata (either this or `metadata`) |
| `metadata`      | `ValidatedMetadata`                              |    ‚ö†Ô∏è    | Pre-validated metadata (either this or `url`)     |
| `securityState` | `'trusted' \| 'unknown' \| 'malicious'`          |    ‚ùå    | Security status indicator                         |
| `stylePreset`   | `'default' \| 'x-dark' \| 'x-light' \| 'custom'` |    ‚ùå    | Visual theme                                      |
| `bypassProxy`   | `boolean`                                        |    ‚ùå    | Direct fetch (Beta only)                          |

:::info Configuration Types
You must provide either `url` **OR** `metadata`, but not both.
:::

### Style Presets

<Tabs>
<TabItem value="default" label="üåü Default">

```tsx
<MiniAppComponent
  url="https://app.sherry.social/action/swap"
  adapter={adapter}
  stylePreset="default"
/>
```

</TabItem>
<TabItem value="dark" label="üåô Dark Theme">

```tsx
<MiniAppComponent
  url="https://app.sherry.social/action/swap"
  adapter={adapter}
  stylePreset="x-dark"
/>
```

</TabItem>
<TabItem value="light" label="‚òÄÔ∏è Light Theme">

```tsx
<MiniAppComponent
  url="https://app.sherry.social/action/swap"
  adapter={adapter}
  stylePreset="x-light"
/>
```

</TabItem>
</Tabs>

---

## Framework Integration

<Tabs>
<TabItem value="nextjs-app" label="‚ñ≤ Next.js App Router">

```tsx title="app/components/MiniAppWrapper.tsx"
'use client';

import { MiniAppComponent, useWagmiAdapter } from '@sherrylabs/slinks/next';

interface MiniAppWrapperProps {
  url: string;
  title?: string;
}

export default function MiniAppWrapper({ url, title }: MiniAppWrapperProps) {
  const adapter = useWagmiAdapter();

  return (
    <div className="bg-white rounded-lg shadow-sm border p-6">
      {title && <h3 className="text-lg font-semibold mb-4">{title}</h3>}

      <MiniAppComponent url={url} adapter={adapter} bypassProxy={true} stylePreset="default" />
    </div>
  );
}
```

</TabItem>
<TabItem value="nextjs-pages" label="üìÑ Next.js Pages Router">

```tsx title="pages/_app.tsx"
import type { AppProps } from 'next/app';
import { Web3Provider } from '../src/providers/Web3Provider';
import '@sherrylabs/slinks/index.css';

export default function App({ Component, pageProps }: AppProps) {
  return (
    <Web3Provider>
      <Component {...pageProps} />
    </Web3Provider>
  );
}
```

</TabItem>
</Tabs>

---

## Performance Optimization

### Lazy Loading

```tsx title="src/components/LazyMiniApp.tsx"
import React, { lazy, Suspense } from 'react';
import { MiniAppComponent, useWagmiAdapter } from '@sherrylabs/slinks/next';

const LazyMiniAppComponent = lazy(() =>
  import('@sherrylabs/slinks/next').then(module => ({
    default: module.MiniAppComponent,
  })),
);

function LoadingSpinner() {
  return (
    <div className="flex items-center justify-center h-64">
      <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
    </div>
  );
}

export function LazyMiniApp({ url }: { url: string }) {
  const adapter = useWagmiAdapter();

  return (
    <Suspense fallback={<LoadingSpinner />}>
      <LazyMiniAppComponent url={url} adapter={adapter} bypassProxy={true} />
    </Suspense>
  );
}
```

### Memoization

```tsx title="src/components/OptimizedMiniApp.tsx"
import React, { memo, useMemo } from 'react';
import { MiniAppComponent, useWagmiAdapter } from '@sherrylabs/slinks/next';

interface OptimizedMiniAppProps {
  url: string;
  securityState?: 'trusted' | 'unknown' | 'malicious';
}

export const OptimizedMiniApp = memo(function OptimizedMiniApp({
  url,
  securityState = 'unknown',
}: OptimizedMiniAppProps) {
  const adapter = useWagmiAdapter();

  const memoizedProps = useMemo(
    () => ({
      url,
      adapter,
      securityState,
      stylePreset: 'default',
    }),
    [url, adapter, securityState],
  );

  return <MiniAppComponent {...memoizedProps} />;
});
```

---

## Environment Configuration

```bash title=".env.local"
REACT_APP_SHERRY_CLIENT_KEY=your_client_key_here
REACT_APP_SHERRY_API_BASE_URL=https://api.sherry.social
REACT_APP_BYPASS_PROXY=true
REACT_APP_DEBUG_MODE=true
```

---

## Troubleshooting

### Common Issues

<details>
<summary><strong>‚ùå "MiniApp Directory not initialized"</strong></summary>

Make sure to initialize the directory before using MiniApps:

```tsx
import { MiniAppDirectory } from '@sherrylabs/slinks-core';

useEffect(() => {
  MiniAppDirectory.getInstance().init({});
}, []);
```

</details>

<details>
<summary><strong>üö´ CORS Issues</strong></summary>

Use `bypassProxy: true` for beta testing, but be aware this may cause CORS issues:

```tsx
<MiniAppComponent
  url="https://app.sherry.social/action/swap"
  adapter={adapter}
  bypassProxy={true}
/>
```

</details>

<details>
<summary><strong>üé® Styles not applying</strong></summary>

Ensure you've imported the CSS file:

```tsx
import '@sherrylabs/slinks/index.css';
```

</details>

<details>
<summary><strong>üîå useWagmiAdapter hook error</strong></summary>

Verify your component is wrapped in providers:

```tsx
function App() {
  return (
    <WagmiProvider config={config}>
      <QueryClientProvider client={queryClient}>
        <MyComponent />
      </QueryClientProvider>
    </WagmiProvider>
  );
}
```

</details>

---

## Migration Guide

### From Previous Versions

<Tabs>
<TabItem value="imports" label="üì• Update Imports">

```tsx
// ‚ùå Before
import { MiniApp } from '@sherrylabs/slinks';

// ‚úÖ After
import { MiniAppComponent } from '@sherrylabs/slinks/next';
```

</TabItem>
<TabItem value="adapter" label="üîå Update Adapter">

```tsx
// ‚ùå Before
const adapter = createWagmiAdapter(wagmiConfig);

// ‚úÖ After
const adapter = useWagmiAdapter();
```

</TabItem>
<TabItem value="props" label="‚öôÔ∏è Update Props">

```tsx
// ‚ùå Before
<MiniApp metadata={metadata} walletAdapter={adapter} />

// ‚úÖ After
<MiniAppComponent
  metadata={metadata}
  adapter={adapter}
  securityState="trusted"
/>
```

</TabItem>
</Tabs>

---

## Support & Resources

For help and further information:

- **Documentation:** Complete API reference and guides are available throughout this site.
- **Community:** [Join our Discord](https://discord.com/invite/sherry) for discussions and support.
- **Issues:** [Report issues on GitHub](https://github.com/orgs/SherryLabs/repositories).
- **Examples:** Explore complete working examples and demos in the SDK repository or relevant documentation sections.
